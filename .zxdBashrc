# since .profile loads ~/.bashrc, i put everything here for simplicity.

stty -ixon
set -o vi

if [[ -d ~/.dir_colors/dircolors ]]; then
    eval `dircolors ~/.dir_colors/dircolors`
fi

if [[ -f /opt/vlab-4.4.1/bin/sourceme.sh ]]; then
    source /opt/vlab-4.4.1/bin/sourceme.sh
fi

cdv()
{
  printf '\033]51;["call", "Tapi_lcd", ["%s"]]\007' "$(pwd)"
}

cd_and_cdv()
{
  cd "$@" && cdv
}

hookvim()
{
    alias cd=cd_and_cdv
}

# bindings
[[ -f ~/.fzf.bash ]] && source ~/.fzf.bash

# change fzf a-c to <c-f><c-j>
bind "$(bind -s | grep fzf_cd | sed -r 's/^"[^"]+"/"\\C-f\\C-j"/')"

# change fzf c-r to <c-f><c-r>
bind "$(bind -s | grep fzf_history | sed -r 's/^"[^"]+"/"\\C-f\\C-r"/')"

# change fzf c-t to <c-f><c-t>
bind -x "$(bind -X | grep fzf-file-widget | sed -r 's/^"[^"]+"/"\\C-f\\C-t"/')"

# reset c-r and c-t for readline, note no space before :, one space after :
bind '"\C-r": reverse-search-history'
bind '"\C-t": transpose-chars'

if [ ! -z "$NVM_DIR" ]; then
    [ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion
fi

# vim:set filetype=sh:
